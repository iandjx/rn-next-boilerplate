#!/bin/node
const fs = require('fs');

const rnConfig = require('../env.json');

const selectedEnv = process.argv[2];

if (!Object.keys(rnConfig.environments).includes(selectedEnv)) {
  console.error(
    'ðŸ’€ðŸ’€ðŸ’€ \x1b[47m\x1b[31mRequested environment',
    selectedEnv,
    'does not exists inside env.json\x1b[0m ðŸ’€ðŸ’€ðŸ’€'
  );
  process.exit(1);
}

const envVars = rnConfig.environments[process.argv[2]];

const content = `
/**************** DO NOT TOUCH *****************/
/* This file gets generated by 'env:*' scripts to edit in env.json then generate script */
/***********************************************/
export default ${JSON.stringify(envVars, undefined, 2)};
`;

fs.writeFileSync('src/env.ts', content);
